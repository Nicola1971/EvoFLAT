!function($,w,d,u){"use strict";modx.extended({frameset:"frameset",minWidth:840,isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),typesactions:{16:1,301:2,78:3,22:4,102:5,108:6,3:7,4:7,6:7,27:7,61:7,62:7,63:7,72:7},thememodes:["","lightness","light","dark","darkness"],tabsTimer:0,popupTimer:0,init:function(){if(localStorage.getItem("MODX_widthSideBar")||localStorage.setItem("MODX_widthSideBar",this.config.tree_width),this.mainmenu.init(),w.location.hash)if(modx.getActionFromUrl(w.location.hash,2))w.history.replaceState(null,d.title,modx.MODX_MANAGER_URL);else if(modx.getActionFromUrl(w.location.hash)||modx.main.getQueryVariable("filemanager",w.location.hash)){var a=modx.main.getQueryVariable("filemanager",w.location.hash)?modx.MODX_MANAGER_URL+modx.main.getQueryVariable("filemanager",w.location.hash)+w.location.hash.replace("#?","?"):w.location.href.replace("#?","?");modx.config.global_tabs?modx.tabs({url:a,title:"blank"}):w.main?w.main.frameElement.src=a:modx.openWindow(a)}this.resizer.init(),this.search.init(),this.config.session_timeout>0&&w.setInterval(this.keepMeAlive,6e4*this.config.session_timeout),modx.config.mail_check_timeperiod>0&&modx.permission.messages&&setTimeout("modx.updateMail(true)",1e3),d.addEventListener("click",this.hideDropDown,!1),modx.config.global_tabs&&(d.addEventListener("click",this.tabs,!1),this.tabs({url:"?a=2",reload:0}))},mainmenu:{id:"mainMenu",init:function(){var c,a=$("#mainMenu"),b=d.getElementById("mainMenu");a.on("click","a",function(b){$(this).hasClass("dropdown-toggle")&&(a.hasClass("show")&&($(this).hasClass("selected")||!modx.isMobile&&$(this).parent().hasClass("hover"))?($(this).removeClass("selected"),a.removeClass("show")):($(".nav > li > a:not(:hover)").removeClass("selected"),$(this).addClass("selected"),a.addClass("show")),b.stopPropagation(),b.target.dataset.toggle="#mainMenu",modx.hideDropDown(b)),$(this).closest("ul").hasClass("dropdown-menu")&&!$(this).parent("li").hasClass("dropdown-back")&&($(".nav > .active").removeClass("active"),$(".nav li.selected").removeClass("selected"),$(this).closest(".nav > li").addClass("active"),this.offsetParent.id&&d.getElementById(this.offsetParent.id.substr(7)).classList.add("selected"),(modx.isMobile||w.innerWidth<modx.minWidth)&&$(b.target).hasClass("toggle")&&(this.parentNode.classList.add("selected"),b.stopPropagation(),b.preventDefault()))}).on("mouseenter",".nav > li",function(){for(var a=b.querySelectorAll(".nav > li.hover:not(:hover)"),c=0;c<a.length;c++)a[c].classList.remove("hover");this.classList.add("hover")}).on("click",".nav li",function(){(modx.isMobile||w.innerWidth<modx.minWidth)&&$(".nav ul.selected",a).removeClass("selected")}).on("mouseenter",".nav > li li",function(e){for(var g,f=this,h=b.querySelectorAll(".nav > li li.hover:not(:hover)"),i=0;i<h.length;i++)h[i].classList.remove("hover");this.classList.add("hover"),clearTimeout(c),this.offsetParent.nextElementSibling&&this.offsetParent.nextElementSibling.classList.contains("sub-menu")?g=this.offsetParent.nextElementSibling:this.offsetParent&&this.offsetParent.classList.contains("sub-menu")?g=this.offsetParent:(g=d.createElement("ul"),g.className="sub-menu dropdown-menu",this.parentNode.parentNode.appendChild(g)),c=setTimeout(function(){d.querySelector(".nav .sub-menu.show")&&d.querySelector(".nav .sub-menu.show").classList.remove("show"),g.style.left=f.offsetWidth+"px",f.classList.contains("dropdown-toggle")?g.id==="parent_"+f.id?(modx.isMobile?f.parentNode.classList.add("selected"):f.onclick=function(a){a.target.classList.contains("toggle")&&f.parentNode.classList.add("selected")},g.classList.add("show")):(g.classList.remove("show"),$(".nav ul.selected",a).removeClass("selected"),c=setTimeout(function(){var a=f.firstElementChild.href&&"main"===f.firstElementChild.target?f.firstElementChild.href.split("?")[1]+"&elements="+f.id:"";modx.post(modx.MODX_MANAGER_URL+"media/style/"+modx.config.theme+"/ajax.php",a,function(b){if(b){(modx.isMobile||w.innerWidth<modx.minWidth)&&(b='<li class="dropdown-back"><span class="dropdown-item"><i class="fa fa-arrow-left"></i>'+modx.lang.paging_prev+"</span></li>"+b),g.id="parent_"+f.id,g.innerHTML=b;var h=w.location.hash.substr(2).replace(/=/g,"_").replace(/&/g,"__"),i=d.getElementById(h);i&&(i.parentNode.classList.add("selected"),d.getElementById(i.parentNode.parentNode.id.substr(7)).classList.add("selected"));for(var j=0;j<g.children.length;j++)i=g.children[j],i.classList.contains("dropdown-back")&&(i.onclick=function(a){a.target.offsetParent.previousElementSibling.classList.remove("selected"),a.target.offsetParent.classList.remove("show"),a.preventDefault(),a.stopPropagation()}),i.onmouseenter=function(a){clearTimeout(c);var b=a.target.offsetParent.querySelector("li.hover");b&&b.classList.remove("hover"),a.target.classList.add("hover"),f.classList.add("hover"),a.preventDefault(),a.stopPropagation()};g.classList.add("show"),modx.isMobile?e.target.classList.contains("toggle")&&f.parentNode.classList.add("selected"):f.onclick=function(a){a.target.classList.contains("toggle")&&f.parentNode.classList.add("selected")},setTimeout(function(){modx.mainmenu.search(a,g)},200)}})},85)):g.classList.contains("open")&&(g.classList.remove("open"),setTimeout(function(){g.parentNode.removeChild(g)},100))},85),e.preventDefault()})},search:function(a,b){var c,e=b.querySelector("input[name=filter]"),f=-1,g=null;e&&(modx.isMobile||e.focus(),e.onkeyup=function(h){13===h.keyCode&&b.querySelector(".item.hover")?(d.body.click(),g=b.querySelector(".item.hover").firstChild,modx.tabs({url:g.href,title:g.innerHTML})):38===h.keyCode||40===h.keyCode?(e.selectionStart=e.value.length,c=b.querySelectorAll(".item"),c.length&&(40===h.keyCode?f++:f--,f<0?(f=-1,g=b.querySelector(".hover"),g&&g.classList.remove("hover")):f>c.length-1&&(f=c.length-1),f>=0&&f<c.length&&(g=b.querySelector(".hover"),g&&g.classList.remove("hover"),c[f].classList.add("hover")))):modx.post(modx.MODX_MANAGER_URL+"media/style/"+modx.config.theme+"/ajax.php",a+"&filter="+e.value,function(a){f=-1,$(".item",b).remove(),$(b).append(a).on("mouseenter",".item",function(a){$(this).addClass("hover").closest("ul").find("li:not(:hover)").removeClass("hover"),a.stopPropagation()})},"html")})}},search:{result:null,results:null,input:null,mask:null,loader:null,timer:0,init:function(){this.result=d.getElementById("searchresult"),this.input=d.getElementById("searchid"),this.mask=d.querySelector("#searchform .mask"),this.result||(this.result=d.createElement("div"),this.result.id="searchresult",d.body.appendChild(this.result)),this.loader=d.createElement("i"),this.loader.className="fa fa-refresh fa-spin fa-fw",this.input.parentNode.appendChild(this.loader),modx.config.global_tabs&&(this.input.parentNode.onsubmit=function(a){a.preventDefault(),this.target="mainsearch",modx.tabs({url:this.action,title:"Search",name:"mainsearch"}),this.submit()});var a=this;this.input.onkeyup=function(b){b.preventDefault(),clearTimeout(a.timer),""!==a.input.value.length&&a.input.value.length>2?a.timer=setTimeout(function(){a.loader.style.display="block",modx.get(modx.MODX_MANAGER_URL+"?a=71&ajax=1&submitok=Search&searchid="+a.input.value,function(b){a.loader.style.display="none",a.results=b.querySelector(".ajaxSearchResults"),a.results&&""!==a.results.innerHTML?(a.result.innerHTML=a.results.outerHTML,a.open(),a.result.onclick=function(b){var c=b.target,d=c.parentNode;if("I"===c.tagName)modx.openWindow({title:d.innerText,id:d.id,url:d.href}),b.preventDefault(),b.stopPropagation();else{var e="A"===c.tagName&&c||"A"===d.tagName&&d;if(e){var f=a.result.querySelector(".selected");f&&(f.className=""),e.className="selected",modx.isMobile&&a.close()}}}):a.empty()},"document")},300):a.empty()},modx.isMobile&&(this.input.onblur=this.close),this.input.onfocus=this.open,this.input.onclick=this.open,this.input.onmouseenter=this.open,this.result.onmouseenter=this.open,this.result.onmouseleave=this.close,this.mask.onmouseenter=this.open,this.mask.onmouseleave=this.close},open:function(){modx.search.results&&modx.search.result.classList.add("open")},close:function(){modx.search.result.classList.remove("open")},empty:function(){modx.search.result.classList.remove("open"),modx.search.result.innerHTML=""}},main:{id:"main",idFrame:"mainframe",as:null,onload:function(a){w.main=a.target.contentWindow||a.target.defaultView,modx.main.tabRow.init(),modx.main.stopWork(),modx.main.scrollWork(),w.main.document.addEventListener("click",modx.hideDropDown,!1),w.main.document.addEventListener("contextmenu",modx.main.oncontextmenu,!1),modx.config.global_tabs&&w.main.document.addEventListener("click",modx.tabs,!1),w.history.replaceState(null,d.title,modx.getActionFromUrl(w.main.location.search,2)?modx.MODX_MANAGER_URL:"#"+w.main.location.search),setTimeout("modx.tree.restoreTree()",100)},oncontextmenu:function(a){if(!a.ctrlKey){var b=a.target;if(1===modx.user.role&&/modxtv|modxplaceholder|modxattributevalue|modxchunk|modxsnippet|modxsnippetnocache/i.test(b.className)){var c=Date.now(),d=b.innerText.replace(/[\[|\]|{|}|\*||\#|\+|?|\!|&|=|`|:]/g,""),e=b.className.replace(/cm-modx/,""),f=!!d.replace(/^\d+$/,"");d&&f&&(a.preventDefault(),modx.post(modx.MODX_MANAGER_URL+"media/style/"+modx.config.theme+"/ajax.php",{a:"modxTagHelper",name:d,type:e},function(e){if(e){e=JSON.parse(e);for(var f in e)e.hasOwnProperty(f)&&e[f].url&&(e[f].onclick="if(event.shiftKey){modx.openWindow({url:'"+e[f].url+"'})}else{modx.popup({url:'"+e[f].url+"',title:'"+e.header.innerHTML+"',width:'95%',height:'95%',margin:0,hide:0,hover:0,overlay:1,overlayclose:0,position:'center elements',animation:0,icon:'none'})}");e=JSON.stringify(e),b.id="node"+c,b.dataset.contextmenu=e,modx.tree.showPopup(a,c,d)}})),a.preventDefault()}}},tabRow:{init:function(){var a=w.main.document.querySelector(".tab-pane > .tab-row");a&&this.build(a)},build:function(a){var b=d.createElement("div"),c=a.querySelector(".selected");b.className="tab-row-container",a.parentNode.insertBefore(b,a),b.appendChild(a);var e=d.createElement("i");e.className="fa fa-angle-left prev disable",e.onclick=function(b){b.stopPropagation(),b.preventDefault();var c=a.querySelector(".selected");c.previousSibling&&(c.previousSibling.click(),modx.main.tabRow.scroll(a))},b.appendChild(e);var f=d.createElement("i");f.className="fa fa-angle-right next disable",f.onclick=function(b){b.stopPropagation(),b.preventDefault();var c=a.querySelector(".selected");c.nextSibling&&(c.nextSibling.click(),modx.main.tabRow.scroll(a))},b.appendChild(f),setTimeout(function(){c=a.querySelector(".selected"),modx.main.tabRow.scroll(a,c),w.main.addEventListener("resize",function(){modx.main.tabRow.scroll(a)},!1),c&&(c.previousSibling&&e.classList.remove("disable"),c.nextSibling&&f.classList.remove("disable"))},100),a.onclick=function(a){var b="H2"===a.target.tagName?a.target:"SPAN"===a.target.tagName?a.target.parentNode:null;b&&(b.previousSibling?this.parentNode.querySelector("i.prev").classList.remove("disable"):this.parentNode.querySelector("i.prev").classList.add("disable"),b.nextSibling?this.parentNode.querySelector("i.next").classList.remove("disable"):this.parentNode.querySelector("i.next").classList.add("disable"),modx.main.tabRow.scroll(this,b))}},scroll:function(a,b,c){b=b||a.querySelector(".selected")||a.firstChild,c=c||100;for(var d=0,e=a.childNodes,f=0;f<e.length;f++)d+=e[f].offsetWidth;a.scrollLeft>b.offsetLeft&&$(a).animate({scrollLeft:b.offsetLeft-(b.previousSibling?30:1)},c),b.offsetLeft+b.offsetWidth>a.offsetWidth+a.scrollLeft&&$(a).animate({scrollLeft:b.offsetLeft-a.offsetWidth+b.offsetWidth+(b.nextSibling?30:0)},c),d>a.offsetWidth&&this.drag(a)},drag:function(a){a.onmousedown=function(b){if(0===b.button){b.preventDefault();var c=b.clientX,d=a.scrollLeft;a.ownerDocument.body.focus(),a.onmousemove=a.ownerDocument.onmousemove=function(b){Math.abs(b.clientX-c)>5&&(b.stopPropagation(),a.scrollLeft=d-(b.clientX-c),a.ownerDocument.body.classList.add("drag"))},a.onmouseup=a.ownerDocument.onmouseup=function(b){b.stopPropagation(),a.onmousemove=null,a.ownerDocument.onmousemove=null,a.ownerDocument.body.classList.remove("drag")}}}}},work:function(){d.getElementById("mainloader").classList.add("show")},stopWork:function(){d.getElementById("mainloader").classList.remove("show")},scrollWork:function(){var a=w.main.frameElement.contentWindow,b=a.location.search.substring(1)||a.location.hash.substring(2),c=localStorage.getItem("page_y")||0,d=localStorage.getItem("page_url")||b;(modx.getActionFromUrl(d)===modx.getActionFromUrl(b)&&modx.main.getQueryVariable("id",d)&&modx.main.getQueryVariable("id",d)===modx.main.getQueryVariable("id",b)||d===b)&&a.scrollTo(0,c),a.addEventListener("scroll",function(){this.pageYOffset>=0&&(localStorage.setItem("page_y",this.pageYOffset.toString()),localStorage.setItem("page_url",b))},!1)},getQueryVariable:function(a,b){var c="";if(b||"string"===typeof b){b=b.split("?"),b=b[1]||b[0],b=b.split("&");for(var d=0;d<b.length;d++){var e=b[d].split("=");e[0]===a&&(c=decodeURIComponent(e[1]))}}return c}},resizer:{dragElement:null,oldZIndex:99,newZIndex:999,left:modx.config.tree_width,id:"resizer",switcher:"hideMenu",background:"rgba(0, 0, 0, 0.1)",mask:null,init:function(){if(d.getElementById(modx.resizer.id)&&(modx.resizer.mask=d.createElement("div"),modx.resizer.mask.id="mask_resizer",modx.resizer.mask.style.zIndex=modx.resizer.oldZIndex,d.getElementById(modx.resizer.id).onmousedown=modx.resizer.onMouseDown,d.getElementById(modx.resizer.id).onmouseup=modx.resizer.mask.onmouseup=modx.resizer.onMouseUp,modx.isMobile)){var a,b,c=d.getElementById("tree"),e=c.offsetWidth;d.getElementById("frameset").appendChild(modx.resizer.mask),w.addEventListener("touchstart",function(c){/tab|tab\-row|tab\-row\-container/.test(c.target.className||c.target.offsetParent.className)?this.swipe=!1:(a=c.changedTouches[0].clientX,b=c.changedTouches[0].clientY,this.swipe=!0,this.sidebar=!d.body.classList.contains("sidebar-closed"))},!1),w.addEventListener("touchmove",function(d){var f=d.changedTouches[0];c.style.transition="none",c.style.WebkitTransition="none",modx.resizer.mask.style.transition="none",modx.resizer.mask.style.WebkitTransition="none",modx.resizer.mask.style.visibility="visible";var g=f.clientX-a,h=f.clientY-b;Math.abs(g)>Math.abs(h)&&this.swipe&&(g<0&&this.sidebar?(Math.abs(g)>e&&(g=-e),c.style.transform="translate3d("+g+"px, 0, 0)",c.style.WebkitTransform="translate3d("+g+"px, 0, 0)",modx.resizer.mask.style.opacity=(.5-.5/-e*g).toFixed(2),this.swipe=Math.abs(g)>e/3?"left":"right"):g>0&&!this.sidebar&&(Math.abs(g)>e&&(g=e),c.style.transform="translate3d("+-(e-g)+"px, 0, 0)",c.style.WebkitTransform="translate3d("+-(e-g)+"px, 0, 0)",modx.resizer.mask.style.opacity=(.5/e*g).toFixed(2),this.swipe=Math.abs(g)>e/3?"right":"left"))},!1),w.addEventListener("touchend",function(){"left"===this.swipe&&(d.body.classList.add("sidebar-closed"),modx.resizer.setWidth(0)),"right"===this.swipe&&(d.body.classList.remove("sidebar-closed"),modx.resizer.setWidth(e)),c.style.cssText="",modx.resizer.mask.style.cssText=""},!1)}},onMouseDown:function(a){return a=a||w.event,modx.resizer.dragElement=null!==a.target?a.target:a.srcElement,1!==a.buttons&&0!==a.button||modx.resizer.dragElement.id!==modx.resizer.id?void 0:(modx.resizer.oldZIndex=modx.resizer.dragElement.style.zIndex,modx.resizer.dragElement.style.zIndex=modx.resizer.newZIndex,modx.resizer.dragElement.style.background=modx.resizer.background,localStorage.setItem("MODX_widthSideBar",modx.resizer.dragElement.offsetLeft>0?modx.resizer.dragElement.offsetLeft:0),d.body.appendChild(modx.resizer.mask),d.onmousemove=modx.resizer.onMouseMove,d.body.focus(),d.body.classList.add("resizer_move"),d.onselectstart=function(){return!1},modx.resizer.dragElement.ondragstart=function(){return!1},!1)},onMouseMove:function(a){a=a||w.event,modx.resizer.left=a.clientX>0?a.clientX:0,modx.resizer.dragElement.style.left=modx.pxToRem(modx.resizer.left)+"rem",d.getElementById("tree").style.width=modx.pxToRem(modx.resizer.left)+"rem",d.getElementById("main").style.left=modx.pxToRem(modx.resizer.left)+"rem",(a.clientX<-2||a.clientY<-2)&&modx.resizer.onMouseUp(a)},onMouseUp:function(a){null!==modx.resizer.dragElement&&0===a.button&&modx.resizer.dragElement.id===modx.resizer.id&&(a.clientX>0?(d.body.classList.remove("sidebar-closed"),modx.resizer.left=a.clientX):(d.body.classList.add("sidebar-closed"),modx.resizer.left=0),d.cookie="MODX_widthSideBar="+modx.pxToRem(modx.resizer.left),modx.resizer.dragElement.style.zIndex=modx.resizer.oldZIndex,modx.resizer.dragElement.style.background="",modx.resizer.dragElement.ondragstart=null,modx.resizer.dragElement=null,d.body.classList.remove("resizer_move"),d.body.removeChild(modx.resizer.mask),d.onmousemove=null,d.onselectstart=null)},toggle:function(){if(modx.isMobile||w.innerWidth<=modx.minWidth)d.body.classList.contains("sidebar-closed")?(d.body.classList.remove("sidebar-closed"),localStorage.setItem("MODX_widthSideBar",0),d.cookie="MODX_widthSideBar="+modx.pxToRem(parseInt(d.getElementById("tree").offsetWidth))):(localStorage.setItem("MODX_widthSideBar",parseInt(d.getElementById("tree").offsetWidth)),d.body.classList.add("sidebar-closed"),d.cookie="MODX_widthSideBar=0");else{var a=0!==d.getElementById("tree").offsetWidth?0:parseInt(localStorage.getItem("MODX_widthSideBar"))?parseInt(localStorage.getItem("MODX_widthSideBar")):modx.config.tree_width;modx.resizer.setWidth(a)}},setWidth:function(a){a>0?(localStorage.setItem("MODX_widthSideBar",0),d.body.classList.remove("sidebar-closed")):(localStorage.setItem("MODX_widthSideBar",parseInt(d.getElementById("tree").offsetWidth)),d.body.classList.add("sidebar-closed")),d.cookie="MODX_widthSideBar="+modx.pxToRem(a),d.getElementById("tree").style.width=modx.pxToRem(a)+"rem",d.getElementById("resizer").style.left=modx.pxToRem(a)+"rem",d.getElementById("main").style.left=modx.pxToRem(a)+"rem"},setDefaultWidth:function(){modx.resizer.setWidth(modx.remToPx(modx.config.tree_width))}},tree:{ctx:null,rpcNode:null,itemToChange:"",selectedObjectName:null,selectedObject:0,selectedObjectDeleted:0,selectedObjectUrl:"",drag:!1,deleted:[],init:function(){this.restoreTree()},draggable:function(){if(modx.permission.dragndropdocintree)for(var a=d.querySelectorAll("#treeRoot a:not(.empty)"),b=0;b<a.length;b++){var c=a[b];c.onmousedown=this.onmousedown,c.ondragstart=this.ondragstart,c.ondragenter=this.ondragenter,c.ondragover=this.ondragover,c.ondragleave=this.ondragleave,c.ondrop=this.ondrop}},onmousedown:function(a){if(a.ctrlKey)return this.parentNode.removeAttribute("draggable"),!0;var b=this.dataset.roles+("treeRoot"!==this.parentNode.parentNode.id?this.parentNode.parentNode.previousSibling.dataset.roles:""),c=b&&1!==modx.user.role?b.split(",").map(Number).indexOf(modx.user.role)>-1:!0;modx.tree.itemToChange=this.dataset.id||this.parentNode.id.replace("node",""),modx.tree.selectedObjectName=this.dataset.titleEsc,c?(this.parentNode.draggable=!0,this.parentNode.ondragstart=modx.tree.ondragstart):(this.parentNode.draggable=!1,this.parentNode.ondragstart=function(){return!1})},ondragstart:function(a){a.dataTransfer.effectAllowed="all",a.dataTransfer.dropEffect="all",a.dataTransfer.setData("text",this.id.substr(4))},ondragenter:function(a){d.getElementById("node"+modx.tree.itemToChange)===(this.parentNode.closest("#node"+modx.tree.itemToChange)||this.parentNode)?(this.parentNode.className="",a.dataTransfer.effectAllowed="none",a.dataTransfer.dropEffect="none",modx.tree.drag=!1):(this.parentNode.className="dragenter",a.dataTransfer.effectAllowed="copy",a.dataTransfer.dropEffect="copy",modx.tree.drag=!0),a.preventDefault()},ondragover:function(a){if(modx.tree.drag){var b=a.clientY,c=parseInt(this.getBoundingClientRect().top),d=b-c;d>this.offsetHeight/1.51?(this.parentNode.classList.add("dragafter"),this.parentNode.classList.remove("dragbefore"),this.parentNode.classList.remove("dragenter"),a.dataTransfer.effectAllowed="move",a.dataTransfer.dropEffect="move"):d<this.offsetHeight/3?(this.parentNode.classList.add("dragbefore"),this.parentNode.classList.remove("dragafter"),this.parentNode.classList.remove("dragenter"),a.dataTransfer.effectAllowed="move",a.dataTransfer.dropEffect="move"):(this.parentNode.classList.add("dragenter"),this.parentNode.classList.remove("dragafter"),this.parentNode.classList.remove("dragbefore"),a.dataTransfer.effectAllowed="copy",a.dataTransfer.dropEffect="copy")}else a.dataTransfer.effectAllowed="none",a.dataTransfer.dropEffect="none",modx.tree.drag=!1;a.preventDefault()},ondragleave:function(a){this.parentNode.className="",this.parentNode.removeAttribute("draggable"),a.preventDefault()},ondrop:function(a){var b=d.getElementById("node"+modx.tree.itemToChange),c=null,e=modx.tree.itemToChange,f=0,g=[],h=0,i=b.firstChild.querySelector(".indent"),j=0;if(i.innerHTML="",b.removeAttribute("draggable"),this.parentNode.classList.contains("dragenter")){for(f=parseInt(this.parentNode.id.substr(4)),h=parseInt(this.dataset.level)+1,j=0;j<h;j++)i.innerHTML+="<i></i>";if(this.nextSibling)for(this.nextSibling.innerHTML?this.nextSibling.appendChild(b):b.parentNode.removeChild(b),c=this.parentNode.lastChild.children,j=0;j<c.length;j++)g[j]=c[j].id.substr(4);else b.parentNode.removeChild(b),d.querySelector("#node"+f+" .icon").innerHTML=parseInt(this.dataset.private)?modx.style.tree_folder_secure:modx.style.tree_folder;modx.tree.ondragupdate(this,e,f,g)}if(this.parentNode.classList.contains("dragafter")){for(f=/node/.test(this.parentNode.parentNode.parentNode.id)?parseInt(this.parentNode.parentNode.parentNode.id.substr(4)):0,h=parseInt(this.dataset.level),j=0;j<h;j++)i.innerHTML+="<i></i>";for(this.parentNode.parentNode.insertBefore(b,this.parentNode.nextSibling),c=this.parentNode.parentNode.children,j=0;j<c.length;j++)g[j]=c[j].id.substr(4);modx.tree.ondragupdate(this,e,f,g)}if(this.parentNode.classList.contains("dragbefore")){for(f=/node/.test(this.parentNode.parentNode.parentNode.id)?parseInt(this.parentNode.parentNode.parentNode.id.substr(4)):0,h=parseInt(this.dataset.level),j=0;j<h;j++)i.innerHTML+="<i></i>";for(this.parentNode.parentNode.insertBefore(b,this.parentNode),c=this.parentNode.parentNode.children,j=0;j<c.length;j++)g[j]=c[j].id.substr(4);modx.tree.ondragupdate(this,e,f,g)}this.parentNode.removeAttribute("class"),this.parentNode.removeAttribute("draggable"),a.preventDefault()},ondragupdate:function(a,b,c,e){var f=a.dataset.roles+("treeRoot"!==a.parentNode.parentNode.id?a.parentNode.parentNode.previousSibling.dataset.roles:"");if(!(f&&1!==modx.user.role?f.split(",").map(Number).indexOf(modx.user.role)>-1:!0))return alert(modx.lang.error_no_privileges),void modx.tree.restoreTree();modx.post(modx.MODX_MANAGER_URL+"media/style/"+modx.config.theme+"/ajax.php",{a:"movedocument",id:b,parent:c,menuindex:e},function(a){a.errors&&alert(a.errors),modx.tree.restoreTree()},"json");var g=w.main.frameElement.contentWindow.location.search.substr(1);if(modx.getActionFromUrl(g,27)&&parseInt(modx.main.getQueryVariable("id",g))===parseInt(b)){var h=e.indexOf(b),i=w.main.document.querySelector("#documentPane input[name=menuindex]"),j=w.main.document.querySelector("#documentPane input[name=parent]"),k=w.main.document.querySelector("#documentPane #parentName");i&&h>=0&&(i.value=h),j&&k&&(j.value=c,k.innerHTML=c+" ("+d.querySelector("#node"+c+" > a").dataset.titleEsc+")")}},toggleTheme:function(){var a,e,b=1,c=w.main.myCodeMirrors;"undefined"===typeof localStorage.MODX_themeMode&&(localStorage.MODX_themeMode=modx.config.theme_mode),modx.thememodes[parseInt(localStorage.MODX_themeMode)+1]&&(b=parseInt(localStorage.MODX_themeMode)+1),a=modx.thememodes[b];for(e in modx.thememodes)modx.thememodes[e]&&(d.body.classList.remove(modx.thememodes[e]),w.main.document.body.classList.remove(modx.thememodes[e]));if(d.body.classList.add(a),w.main.document.body.classList.add(a),d.cookie="MODX_themeMode="+b,localStorage.MODX_themeMode=b,"undefined"!==typeof c)for(e in c)c.hasOwnProperty(e)&&(~a.indexOf("dark")?(w.main.document.getElementsByName(e)[0].nextElementSibling.classList.add("cm-s-"+c[e].options.darktheme),w.main.document.getElementsByName(e)[0].nextElementSibling.classList.remove("cm-s-"+c[e].options.defaulttheme)):(w.main.document.getElementsByName(e)[0].nextElementSibling.classList.remove("cm-s-"+c[e].options.darktheme),w.main.document.getElementsByName(e)[0].nextElementSibling.classList.add("cm-s-"+c[e].options.defaulttheme)))},toggleNode:function(a,b){if(a=a||w.event,!a.ctrlKey){a.stopPropagation();var c=d.getElementById("node"+b).firstChild;this.rpcNode=c.nextSibling;var e=c.querySelector(".toggle"),f=c.querySelector(".icon");if(""===this.rpcNode.innerHTML){e&&(e.innerHTML=c.dataset.iconCollapsed),f.innerHTML=c.dataset.iconFolderOpen;var g=this.rpcNode.innerHTML,h=modx.lang.loading_doc_tree;if(modx.openedArray[b]=1,""===g||g.indexOf(h)>0){var i=this.getFolderState();d.getElementById("treeloader").classList.add("visible"),modx.post(modx.MODX_MANAGER_URL+"media/style/"+modx.config.theme+"/ajax.php","a=1&f=nodes&indent="+c.dataset.indent+"&parent="+b+"&expandAll="+c.dataset.expandall+i,function(a){modx.tree.rpcLoadData(a),modx.tree.draggable()})}this.saveFolderState()}else e&&(e.innerHTML=c.dataset.iconExpanded),f.innerHTML=c.dataset.iconFolderClose,delete modx.openedArray[b],this.rpcNode.style.overflow="hidden",$(this.rpcNode.firstChild).animate({marginTop:-this.rpcNode.offsetHeight+"px"},100,function(){this.parentNode.innerHTML=""}),this.saveFolderState();a.preventDefault()}},rpcLoadData:function(a){if(null!==this.rpcNode){var b;this.rpcNode.innerHTML="object"===typeof a?a.responseText:a,this.rpcNode.loaded=!0,"DIV"===this.rpcNode.firstChild.tagName?("treeRoot"===this.rpcNode.id?(b=d.getElementById("binFull"),this.showBin(b?!0:!1)):(this.rpcNode.style.overflow="hidden",this.rpcNode.firstElementChild.style.marginTop=-this.rpcNode.offsetHeight+"px",$(this.rpcNode.firstChild).animate({marginTop:0},100)),d.getElementById("treeloader").classList.remove("visible")):(b=d.getElementById("loginfrm"),b&&(this.rpcNode.parentNode.removeChild(this.rpcNode),w.location.href=modx.MODX_MANAGER_URL))}},treeAction:function(a,b,c){if(!a.ctrlKey){var e=d.getElementById("node"+b).firstChild,f=e.dataset.treepageclick,g=parseInt(e.dataset.showchildren),h=parseInt(e.dataset.openfolder);if(c=c||e.dataset&&e.dataset.titleEsc,"move"===tree.ca)try{this.setSelectedByContext(b),w.main.setMoveValue(b,c)}catch(i){alert(modx.lang.unable_set_parent)}if("open"===tree.ca||""===tree.ca){if(0===b)j="?a=2";else{var j="";j=!isNaN(f)&&isFinite(f)?"?a="+f+"&r=1&id="+b+(0===h?this.getFolderState():""):f,2===h&&(1!==g&&(j=""),this.toggleNode(a,b))}j&&(a.shiftKey?(w.getSelection().removeAllRanges(),modx.openWindow(j),this.restoreTree()):(modx.tabs({url:modx.MODX_MANAGER_URL+j,title:c+"<small>("+b+")</small>"}),modx.isMobile&&w.innerWidth<modx.minWidth&&modx.resizer.toggle())),this.itemToChange=b,this.setSelected(b)}if("parent"===tree.ca)try{this.setSelectedByContext(b),w.main.setParent(b,c)}catch(i){alert(modx.lang.unable_set_parent)}if("link"===tree.ca)try{this.setSelectedByContext(b),w.main.setLink(b)}catch(i){alert(modx.lang.unable_set_link)}a.preventDefault()}},showPopup:function(e,id,title){if(!e.ctrlKey){e.preventDefault();var tree=d.getElementById("tree"),el=d.getElementById("node"+id)||e.target,x=0,y=0;if(el.firstChild&&el.firstChild.dataset&&el.firstChild.dataset.contextmenu&&(el=el.firstChild),el){if(el.dataset.contextmenu){e.target.dataset.toggle="#contextmenu",modx.hideDropDown(e),this.ctx=d.createElement("div"),this.ctx.id="contextmenu",this.ctx.className="dropdown-menu",d.getElementById(modx.frameset).appendChild(this.ctx),this.setSelectedByContext(id);var dataJson=JSON.parse(el.dataset.contextmenu);for(var key in dataJson)if(dataJson.hasOwnProperty(key)){var item=d.createElement("div");for(var k in dataJson[key])if(dataJson[key].hasOwnProperty(k))if("on"===k.substring(0,2)){var onEvent=dataJson[key][k];item[k]=function(onEvent){return function(event){eval(onEvent)}}(onEvent)}else item[k]=dataJson[key][k];0===key.indexOf("header")&&(item.className+=" menuHeader"),0===key.indexOf("item")&&(item.className+=" menuLink"),(0===key.indexOf("seperator")||0===key.indexOf("separator"))&&(item.className+=" seperator separator"),this.ctx.appendChild(item)}x=e.clientX>0?e.clientX:e.pageX,y=e.clientY>0?e.clientY:e.pageY,e.view.position=e.view.frameElement?e.view.frameElement.getBoundingClientRect():e.target.offsetParent.getBoundingClientRect(),e.view.frameElement?(x+=e.view.position.left,y+=e.view.frameElement.offsetParent.offsetTop):e.target.parentNode.parentNode.classList.contains("node")&&(x+=50),x>e.view.position.width&&(x=e.view.position.width-this.ctx.offsetWidth),y+this.ctx.offsetHeight/2>e.view.position.height?y=e.view.position.height-this.ctx.offsetHeight-5:y-this.ctx.offsetHeight/2<e.view.position.top?y=e.view.position.top+5:y-=this.ctx.offsetHeight/2,this.itemToChange=id,this.selectedObjectName=title,this.dopopup(this.ctx,x+10,y)}else{el=el.firstChild;var ctx=d.getElementById("mx_contextmenu");e.target.dataset.toggle="#mx_contextmenu",modx.hideDropDown(e),this.setSelectedByContext(id);var i4=d.getElementById("item4"),i5=d.getElementById("item5"),i8=d.getElementById("item8"),i9=d.getElementById("item9"),i10=d.getElementById("item10"),i11=d.getElementById("item11");1===modx.permission.publish_document?(i9.style.display="block",i10.style.display="block",1===parseInt(el.dataset.published)?i9.style.display="none":i10.style.display="none"):i5&&(i5.style.display="none"),1===modx.permission.delete_document&&(i4.style.display="block",i8.style.display="block",1===parseInt(el.dataset.deleted)?(i4.style.display="none",i9.style.display="none",i10.style.display="none"):i8.style.display="none"),i11&&(i11.style.display=1===parseInt(el.dataset.isfolder)?"block":"none");var bodyHeight=tree.offsetHeight+tree.offsetTop;x=e.clientX>0?e.clientX:e.pageX,y=e.clientY>0?e.clientY:e.pageY,y+ctx.offsetHeight/2>bodyHeight?y=bodyHeight-ctx.offsetHeight-5:y-ctx.offsetHeight/2<tree.offsetTop?y=tree.offsetTop+5:y-=ctx.offsetHeight/2,e.target.parentNode.parentNode.classList.contains("node")&&(x+=50),this.itemToChange=id,this.selectedObjectName=title,ctx.classList.contains("show")?(ctx.classList.remove("show"),setTimeout(function(){modx.tree.dopopup(ctx,x+10,y)},100)):this.dopopup(ctx,x+10,y)}e.stopPropagation()}}},dopopup:function(a,b,c){this.selectedObjectName.length>30&&(this.selectedObjectName=this.selectedObjectName.substr(0,30)+"...");var e=d.getElementById("nameHolder");e.innerHTML=this.selectedObjectName,a.style.left=b+(modx.config.textdir?"-190":"")+"px",a.style.top=c+"px",a.classList.add("show")},menuHandler:function(a){switch(a){case 1:this.setActiveFromContextMenu(this.itemToChange),modx.tabs({url:modx.MODX_MANAGER_URL+"?a=3&id="+this.itemToChange,title:this.selectedObjectName+"<small>("+this.itemToChange+")</small>"});break;case 2:this.setActiveFromContextMenu(this.itemToChange),modx.tabs({url:modx.MODX_MANAGER_URL+"?a=27&r=1&id="+this.itemToChange,title:this.selectedObjectName+"<small>("+this.itemToChange+")</small>"});break;case 3:modx.tabs({url:modx.MODX_MANAGER_URL+"?a=4&pid="+this.itemToChange,title:this.selectedObjectName+"<small>("+this.itemToChange+")</small>"});break;case 4:this.selectedObjectDeleted?alert('"'+this.selectedObjectName+'" '+modx.lang.already_deleted):confirm('"'+this.selectedObjectName+'"\n\n'+modx.lang.confirm_delete_resource)===!0&&modx.tabs({url:modx.MODX_MANAGER_URL+"?a=6&id="+this.itemToChange,title:this.selectedObjectName+"<small>("+this.itemToChange+")</small>"});break;case 5:this.setActiveFromContextMenu(this.itemToChange),modx.tabs({url:modx.MODX_MANAGER_URL+"?a=51&id="+this.itemToChange,title:this.selectedObjectName+"<small>("+this.itemToChange+")</small>"});break;case 6:modx.tabs({url:modx.MODX_MANAGER_URL+"?a=72&pid="+this.itemToChange,title:this.selectedObjectName+"<small>("+this.itemToChange+")</small>"});break;case 7:confirm(modx.lang.confirm_resource_duplicate)===!0&&modx.tabs({url:modx.MODX_MANAGER_URL+"?a=94&id="+this.itemToChange,title:this.selectedObjectName+"<small>("+this.itemToChange+")</small>"});
      break;case 8:d.getElementById("node"+this.itemToChange).firstChild.dataset.deleted?confirm('"'+this.selectedObjectName+'" '+modx.lang.confirm_undelete)===!0&&modx.tabs({url:modx.MODX_MANAGER_URL+"?a=63&id="+this.itemToChange,title:this.selectedObjectName+"<small>("+this.itemToChange+")</small>"}):alert('"'+this.selectedObjectName+'"'+modx.lang.not_deleted);break;case 9:confirm('"'+this.selectedObjectName+'" '+modx.lang.confirm_publish)===!0&&modx.tabs({url:modx.MODX_MANAGER_URL+"?a=61&id="+this.itemToChange,title:this.selectedObjectName+"<small>("+this.itemToChange+")</small>"});break;case 10:this.itemToChange!==modx.config.site_start?confirm('"'+this.selectedObjectName+'" '+modx.lang.confirm_unpublish)===!0&&modx.tabs({url:modx.MODX_MANAGER_URL+"?a=62&id="+this.itemToChange,title:this.selectedObjectName+"<small>("+this.itemToChange+")</small>"}):alert("Document is linked to site_start variable and cannot be unpublished!");break;case 11:modx.tabs({url:modx.MODX_MANAGER_URL+"?a=56&id="+this.itemToChange,title:this.selectedObjectName+"<small>("+this.itemToChange+")</small>"});break;case 12:w.open(d.getElementById("node"+this.itemToChange).firstChild.dataset.href,"previeWin");break;default:alert("Unknown operation command.")}},setSelected:function(a){var b=d.querySelector("#tree .current");b&&b.classList.remove("current"),a&&("object"===typeof a?a.classList.add("current"):(b=d.querySelector("#node"+a+">.node")||d.getElementById("node"+a),b&&b.classList.add("current")))},setActiveFromContextMenu:function(a){var b=d.querySelector("#node"+a+">.node");b&&this.setSelected(b)},setSelectedByContext:function(a){var b=d.querySelector("#treeRoot .selected");b&&b.classList.remove("selected"),b=d.querySelector("#node"+a+">.node"),b&&b.classList.add("selected")},setItemToChange:function(){var a=w.main.document&&(w.main.document.URL||w.main.document.location.search),b=modx.getActionFromUrl(a);this.itemToChange=a&&modx.typesactions[b]?(7===modx.typesactions[b]?"":modx.typesactions[b]+"_")+parseInt(modx.main.getQueryVariable("id",a)):"",this.setSelected(this.itemToChange)},restoreTree:function(){d.getElementById("treeRoot")&&(d.getElementById("treeloader").classList.add("visible"),this.setItemToChange(),this.rpcNode=d.getElementById("treeRoot"),modx.post(modx.MODX_MANAGER_URL+"media/style/"+modx.config.theme+"/ajax.php","a=1&f=nodes&indent=1&parent=0&expandAll=2&id="+this.itemToChange,function(a){modx.tree.rpcLoadData(a),modx.tree.draggable()}))},expandTree:function(){this.rpcNode=d.getElementById("treeRoot"),d.getElementById("treeloader").classList.add("visible"),modx.post(modx.MODX_MANAGER_URL+"media/style/"+modx.config.theme+"/ajax.php","a=1&f=nodes&indent=1&parent=0&expandAll=1&id="+this.itemToChange,function(a){modx.tree.rpcLoadData(a),modx.tree.saveFolderState(),modx.tree.draggable()})},collapseTree:function(){this.rpcNode=d.getElementById("treeRoot"),d.getElementById("treeloader").classList.add("visible"),modx.post(modx.MODX_MANAGER_URL+"media/style/"+modx.config.theme+"/ajax.php","a=1&f=nodes&indent=1&parent=0&expandAll=0&id="+this.itemToChange,function(a){modx.openedArray=[],modx.tree.saveFolderState(),modx.tree.rpcLoadData(a),modx.tree.draggable()})},updateTree:function(){this.rpcNode=d.getElementById("treeRoot"),d.getElementById("treeloader").classList.add("visible");var a=d.sortFrm,b="a=1&f=nodes&indent=1&parent=0&expandAll=2&dt="+a.dt.value+"&tree_sortby="+a.sortby.value+"&tree_sortdir="+a.sortdir.value+"&tree_nodename="+a.nodename.value+"&id="+this.itemToChange+"&showonlyfolders="+a.showonlyfolders.value;modx.post(modx.MODX_MANAGER_URL+"media/style/"+modx.config.theme+"/ajax.php",b,function(a){modx.tree.rpcLoadData(a),modx.tree.draggable()})},getFolderState:function(){var a;if(modx.openedArray!==[0]){a="&opened=";for(var b in modx.openedArray)modx.openedArray[b]&&(a+=b+"|")}else a="&opened=";return a},saveFolderState:function(){modx.post(modx.MODX_MANAGER_URL+"media/style/"+modx.config.theme+"/ajax.php","a=1&f=nodes&savestateonly=1"+this.getFolderState())},showSorter:function(a){a=a||w.event;var b=d.getElementById("floater");a.target.dataset.toggle="#floater",b.classList.toggle("show"),b.onclick=function(a){a.stopPropagation()}},emptyTrash:function(){confirm(modx.lang.confirm_empty_trash)===!0&&modx.get(modx.MODX_MANAGER_URL+"?a=64",function(){modx.tabsClose(modx.tree.deleted),modx.tree.deleted=[],modx.tree.restoreTree()})},showBin:function(a){var b=d.getElementById("treeMenu_emptytrash");if(b)if(a){b.title=modx.lang.empty_recycle_bin,b.classList.remove("disabled"),b.innerHTML=modx.style.empty_recycle_bin,b.onclick=function(){modx.tree.emptyTrash()};for(var c=d.getElementById("tree").querySelectorAll(".deleted"),e=0;e<c.length;e++)this.deleted[c[e].dataset.id]="evo-tab-page-"+modx.urlToUid("a=27&id="+c[e].dataset.id)}else b.title=modx.lang.empty_recycle_bin_empty,b.classList.add("disabled"),b.innerHTML=modx.style.empty_recycle_bin_empty,b.onclick=null},unlockElement:function(a,b,c){var d=modx.lockedElementsTranslation.msg.replace("[+id+]",b).replace("[+element_type+]",modx.lockedElementsTranslation["type"+a]);confirm(d)===!0&&modx.get(modx.MODX_MANAGER_URL+"?a=67&type="+a+"&id="+b,function(a){1===parseInt(a)?c.parentNode.removeChild(c):alert(a)})},resizeTree:function(){}},removeLocks:function(){confirm(modx.lang.confirm_remove_locks)===!0&&modx.get(modx.MODX_MANAGER_URL+"?a=67",function(){modx.tree.restoreTree()})},keepMeAlive:function(){modx.get("includes/session_keepalive.php?tok="+d.getElementById("sessTokenInput").value+"&o="+Math.random(),function(a){a=JSON.parse(a),"ok"!==a.status&&(w.location.href=modx.MODX_MANAGER_URL+"?a=8")})},updateMail:function(a){try{a&&this.post(modx.MODX_MANAGER_URL,{updateMsgCount:!0},function(a){var b=a.split(","),c=d.getElementById("msgCounter");b[0]>0?c&&(c.innerHTML=b[0],c.style.display="block"):c&&(c.style.display="none"),b[1]>0&&(c=d.getElementById("newMail"),c&&(c.innerHTML='<a href="javascript:;" onclick="modx.tabs({url:\''+modx.MODX_MANAGER_URL+"?a=10',title:'"+modx.lang.inbox+"'});\">"+modx.style.email+modx.lang.inbox+" ("+b[0]+" / "+b[1]+")</a>",c.style.display="block")),modx.config.mail_check_timeperiod>0&&setTimeout("modx.updateMail(true)",1e3*modx.config.mail_check_timeperiod)})}catch(b){setTimeout("modx.updateMail(true)",1e3*modx.config.mail_check_timeperiod)}},openWindow:function(a){"object"!==typeof a&&(a={url:a}),a.width||(a.width=parseInt(.9*w.innerWidth)+"px"),a.height||(a.height=parseInt(.8*w.innerHeight)+"px"),a.left||(a.left=parseInt(.05*w.innerWidth)+"px"),a.top||(a.top=parseInt(.1*w.innerHeight)+"px"),a.title||(a.title=Math.floor(999999*Math.random()+1)),a.url&&(1===this.plugins.EVOmodal?top.EVO.modal.show(a):w.open(a.url,a.title,"width="+a.width+",height="+a.height+",top="+a.top+",left="+a.left+",toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=no"))},tabsClose:function(a){if(modx.config.global_tabs&&a)for(var b in a)if(a.hasOwnProperty(b)){var c=d.getElementById(a[b]);c&&(c.firstElementChild.contentWindow.documentDirty=!1,c.close())}},tabs:function(a){function b(a){var b=this;this.url=a.url,this.title=a.title||"",this.name=a.name||"",this.timer=null,this.olduid="",this.closeactions=[6,61,62,63,94],this.saveAndCloseActions=[75,86,99,106],this.reload="undefined"!==typeof a.reload?a.reload:1,this.action=modx.getActionFromUrl(a.url),this.uid=modx.getActionFromUrl(a.url,2)?"home":modx.urlToUid(a.url),this.page=d.getElementById("evo-tab-page-"+this.uid),this.row=d.getElementsByClassName("evo-tab-row")[0].firstElementChild,this.tab=d.getElementById("evo-tab-"+this.uid),this.page?"home"===this.uid?this.reload?(this.page.firstElementChild.src=this.url,this.show()):(this.reload=1,null===this.tab.onclick&&(this.tab.onclick=function(a){b.select.call(b,a,this)}),this.tab.show=function(a){b.show.call(b,a)},modx.tabs.selected=this.tab):(this.show(),~this.closeactions.indexOf(this.action)&&(this.setDocPublished(),modx.get(this.url,function(){modx.tree.restoreTree()}))):~this.closeactions.indexOf(this.action)?modx.get(this.url,function(){modx.tree.restoreTree()}):this.create()}if(b.prototype={create:function(){var a=this;modx.main.work(),modx.tabs.selected=this.row.querySelector(".selected"),modx.tabs.selected&&(d.getElementById(modx.tabs.selected.id.replace("tab","tab-page")).classList.remove("show"),modx.tabs.selected.classList.remove("selected")),this.page=d.createElement("div"),this.page.id="evo-tab-page-"+this.uid,this.page.className="evo-tab-page iframe-scroller show",this.page.innerHTML=/iPhone|iPad|iPod/i.test(navigator.userAgent)?'<iframe class="tabframes" src="'+this.url+'" name="'+this.name+'" width="100%" height="100%" scrolling="no" frameborder="0"></iframe>':'<iframe class="tabframes" src="'+this.url+'" name="'+this.name+'" width="100%" height="100%" scrolling="auto" frameborder="0"></iframe>',d.getElementById("main").appendChild(this.page),this.page.firstElementChild.onload=function(b){a.onload.call(a,b)},this.tab=d.createElement("h2"),this.tab.id="evo-tab-"+this.uid,this.tab.className="tab selected",this.icon="",/<i/.test(this.title)||(this.icon='<i class="'+modx.setTypeIcon(this.action)+'"></i>'),this.tab.innerHTML='<span class="tab-title" title="'+this.title.replace(/<\/?[^>]+>/g,"")+'">'+this.icon+this.title+'</span><span class="tab-close">\xd7</span>',this.row.appendChild(this.tab),this.tab.onclick=function(b){a.select.call(a,b,this)},this.tab.close=function(b){a.close.call(a,b)},this.tab.show=function(b){a.show.call(a,b)},this.page.close=function(b){a.close.call(a,b)}},onload:function(a){var b=this;if(w.main=a.target.contentWindow||a.target.defaultView,this.url=w.main.location.search||w.location.hash.substring(1),this.olduid=this.uid,this.uid=modx.urlToUid(this.url),w.main.__alertQuit){w.main.alert=function(){};var c=w.main.document.body.innerHTML;w.main.document.body.style.display="none",history.pushState(null,d.title,modx.getActionFromUrl(w.location.search,2)?modx.MODX_MANAGER_URL:"#"+w.location.search),w.onpopstate=function(){history.go(1)},modx.popup({type:"warning",title:"MODX :: Alert",position:"top center alertQuit",content:c,wrap:"body"}),modx.getLockedElements(modx.getActionFromUrl(this.url),modx.main.getQueryVariable("id",this.url),function(a){a?(b.page.close(),modx.tree.restoreTree()):(w.main.location.href=modx.MODX_MANAGER_URL+b.url,w.history.replaceState(null,d.title,modx.getActionFromUrl(b.url,2)?modx.MODX_MANAGER_URL:"#"+b.url))})}else modx.getActionFromUrl(this.url,2)||~this.saveAndCloseActions.indexOf(modx.getActionFromUrl(this.url))&&parseInt(modx.main.getQueryVariable("r",this.url))?this.close(a):this.olduid!==this.uid&&d.getElementById("evo-tab-"+this.uid)?(this.close(a),d.getElementById("evo-tab-"+this.uid).show()):(this.title=w.main.document.body.querySelectorAll("h1")[0]&&w.main.document.body.querySelectorAll("h1")[0].innerHTML||this.title,this.title&&"home"!==this.uid&&(this.tab.innerHTML='<span class="tab-title" title="'+this.title.replace(/<\/?[^>]+>/g,"")+'">'+this.title+'</span><span class="tab-close">\xd7</span>'),this.page.id="evo-tab-page-"+this.uid,this.tab.id="evo-tab-"+this.uid,this.tab.classList.remove("changed"),this.show(),modx.main.onload(a),w.main.document.addEventListener("click",function e(a){"undefined"!==typeof a.view.documentDirty&&a.view.documentDirty&&!b.tab.classList.contains("changed")&&(b.tab.classList.add("changed"),this.removeEventListener(a.type,e,!1))},!1),w.main.document.addEventListener("keyup",function f(a){"undefined"!==typeof a.view.documentDirty&&a.view.documentDirty&&!b.tab.classList.contains("changed")&&(b.tab.classList.add("changed"),this.removeEventListener(a.type,f,!1))},!1))},show:function(){modx.tabs.selected=this.row.querySelector(".selected"),modx.tabs.selected&&modx.tabs.selected!==this.tab&&(d.getElementById(modx.tabs.selected.id.replace("tab","tab-page")).classList.remove("show"),modx.tabs.selected.classList.remove("selected")),this.page.classList.add("show"),this.tab.classList.add("selected"),modx.tabs.selected=this.tab,w.main=this.page.firstElementChild.contentWindow,w.history.replaceState(null,w.main.document.title,modx.getActionFromUrl(w.main.location.search,2)?modx.MODX_MANAGER_URL:"#"+w.main.location.search),modx.tree.setItemToChange(),modx.main.tabRow.scroll(this.row,this.tab,350)},close:function(a){var b=this.page.firstElementChild.contentWindow.documentDirty,c=!!this.page.firstElementChild.contentWindow.checkDirt;(b&&c&&confirm(this.page.firstElementChild.contentWindow.checkDirt(a))||!b)&&(modx.tabs.selected===this.tab&&(tree.ca="open"),modx.tabs.selected=this.tab.classList.contains("selected")?this.tab.previousElementSibling:this.row.querySelector(".selected"),this.page.parentNode.removeChild(this.page),this.row.removeChild(this.tab),modx.tabs.selected.show())},select:function(a){if("tab-close"===a.target.className)this.close(a);else if(modx.tabs.selected===this.tab){var b=this;this.timer?(clearTimeout(this.timer),this.timer=null,w.main.location.reload()):this.timer=setTimeout(function(){b.timer=null},250)}else this.show()},setDocPublished:function(){var a=w.main.document.getElementsByName("publishedcheck")[0];a&&(a.checked=61===this.action,w.main.document.getElementsByName("published")[0].value=+a.checked),modx.getActionFromUrl(w.main.location.search,3)&&w.main.location.reload()}},modx.config.global_tabs){if("undefined"===typeof a.currentTarget)return new b(a);var c=a;0===c.button&&c.target&&("A"===c.target.tagName&&"main"===c.target.target||c.target.parentNode&&"A"===c.target.parentNode.tagName&&"main"===c.target.parentNode.target)&&(a="A"===c.target.tagName&&c.target||"A"===c.target.parentNode.tagName&&c.target.parentNode,c.shiftKey?modx.openWindow({url:a.href}):modx.tabs({url:a.href,title:a.innerHTML}),c.preventDefault())}else a.url&&(w.main?w.main.frameElement.src=a.url:modx.openWindow(a.url))},popup:function(a){if("object"===typeof a&&(a.url||a.content||a.text)){var b={addclass:"",animation:"fade",content:a.content||a.text||"",clickclose:0,closeall:0,data:"",dataType:"document",delay:5e3,draggable:!1,event:null,height:"auto",hide:1,hover:1,icon:"",iframe:"iframe",margin:".5rem",maxheight:"",method:"GET",overlay:0,overlayclose:0,position:"center",resize:!1,selector:"",showclose:1,target:"main",uid:"",type:"default",title:"",url:"",width:"20rem",wrap:a.wrap||w.main.document.body,zIndex:10500,w:null,show:function(){~b.position.indexOf("center")&&(b.event?(b.el.style.left=b.event.clientX+b.mt+"px",b.el.style.bottom=b.w.innerHeight-b.el.offsetHeight-b.event.clientY+b.mt+"px"):(b.el.style.left=/(%)/.test(b.width)?(100-parseInt(b.width))/2-b.mt/(b.w.innerWidth/100)+"%":(b.w.innerWidth-b.el.offsetWidth)/2-b.mt+"px",b.el.style.bottom=/(%)/.test(b.height)?(100-parseInt(b.height))/2-b.mt/(b.w.innerHeight/100)+"%":(b.w.innerHeight-b.el.offsetHeight-b.wrap.offsetTop)/2-b.mt+"px")),~b.position.indexOf("left")&&(b.el.style.left=0),b.el.style.right=~b.position.indexOf("right")?0:"auto",~b.position.indexOf("top")?(b.el.style.top=0,b.el.style.bottom=""):b.el.style.top="auto",~b.position.indexOf("bottom")&&(b.el.style.bottom=0),b.calc(),b.el.className+=" in",b.showclose&&(b.el.querySelector(".close").onclick=b.close),b.hide&&(b.el.timer=setTimeout(function(){clearTimeout(b.el.timer),b.close()},b.delay)),b.hover&&(b.el.onmouseenter=function(){clearTimeout(b.el.timer)},b.el.onmouseleave=b.close),b.overlayclose&&b.o&&(b.o.onclick=b.close),b.clickclose&&(b.el.onclick=b.close),b.draggable&&modx.dragging(b.el,{wrap:b.wrap,resize:b.resize})},close:function(a){if(b.event=a||b.event||w.event,b.url&&"iframe"===b.iframe){var c=b.wrap.ownerDocument.querySelectorAll("."+b.className+".in");if(c){var d=b.el.lastElementChild.firstElementChild.contentWindow.documentDirty;(d&&confirm(b.el.lastElementChild.firstElementChild.contentWindow.checkDirt(b.event))||!d)&&(b.el.classList.remove("in"),b.animation||b.el.classList.remove("show"),b.calc(1),b.o&&b.o.parentNode&&(b.o.parentNode.removeChild(b.o),b.wrap.style.overflow=""),b.el.timer=setTimeout(function(){clearTimeout(b.el.timer),b.el.parentNode&&b.el.parentNode.removeChild(b.el)},200))}}else b.el.classList.remove("in"),b.animation||b.el.classList.remove("show"),b.calc(1),b.o&&b.o.parentNode&&(b.o.parentNode.removeChild(b.o),b.wrap.style.overflow=""),b.el.timer=setTimeout(function(){clearTimeout(b.el.timer),b.el.parentNode&&b.el.parentNode.removeChild(b.el)},200);"function"===typeof b.onclose&&b.onclose(a,b.el)},calc:function(a){var c=b.wrap.ownerDocument.querySelectorAll("."+b.className+'.in[data-position="'+b.el.dataset.position+'"]');if(c&&c.length){b.els=[];for(var d=0;d<c.length;d++)b.els.push(c[d]);for(b.els.sort(function(a,b){return a.index-b.index}),b.t=0,b.t=0===b.position.indexOf("center")?a?(b.w.innerHeight-b.els[b.els.length-1].offsetHeight)/2-b.mt:(b.w.innerHeight+b.el.offsetHeight)/2:a?0:b.el.offsetHeight+b.mt,d=b.els.length;d--;)b.wrap.ownerDocument.getElementById(b.els[d].id).index=d-b.els.length,~b.position.indexOf("top")?b.wrap.ownerDocument.getElementById(b.els[d].id).style.top=b.t+"px":b.wrap.ownerDocument.getElementById(b.els[d].id).style.bottom=b.t+"px",b.t+=b.els[d].offsetHeight+b.mt,b.closeall&&b.el!==c[d]&&b.els[d].close()}},onclose:function(){}};for(var c in a)a.hasOwnProperty(c)&&"undefined"!==typeof b[c]&&(b[c]=a[c]);if(b.timer=0,b.position=b.position.split(" "),modx.popupLastIndex?b.zIndex=modx.popupLastIndex++:modx.popupLastIndex=b.zIndex,b.uid=a.url?modx.urlToUid(a.url):modx.toHash(a),b.className="evo-popup","string"===typeof b.wrap&&(b.wrap=d.querySelector(b.wrap)),b.w=b.wrap.ownerDocument.defaultView||b.wrap.ownerDocument.parentWindow,b.overlay&&(b.wrap.querySelector(".evo-popup-overlay")?(b.o=b.wrap.querySelector(".evo-popup-overlay"),b.o.style.zIndex=b.zIndex-1):(b.o=d.createElement("div"),b.o.className="evo-popup-overlay",b.o.style.zIndex=b.zIndex-1,b.wrap.appendChild(b.o),b.wrap.style.overflow="hidden")),b.el=b.wrap.ownerDocument.getElementById("evo-popup-"+b.uid),b.el)clearTimeout(b.el.timer),b.el.index=0,b.el.classList.remove("in"),b.el.classList.add("show"),b.el.style.zIndex=b.zIndex,b.el.dataset.position=b.position.join(":"),b.mt=parseFloat(getComputedStyle(b.el).marginTop),b.el.close=b.close,b.show();else if(b.el=d.createElement("div"),b.el.id="evo-popup-"+b.uid,b.el.close=b.close,b.el.index=0,b.el.style.position="fixed",b.el.style.width=/[^[0-9]/.test(b.width)?b.width:b.width+"px",b.el.style.height=/[^[0-9]/.test(b.height)?b.height:b.height+"px",b.el.style.zIndex=b.zIndex,b.el.style.margin=b.margin,b.el.className=b.className+" show alert alert-"+b.type+" "+b.addclass+(b.animation?" animation "+b.animation:""),b.el.dataset.position=b.position.join(":"),b.showclose&&(b.el.innerHTML+='<div class="evo-popup-close close">&times;</div>'),b.title&&(b.header=document.createElement("div"),"none"!==b.icon&&(b.header.innerHTML+='<i class="fa fa-fw '+(b.icon?b.icon:"fa-"+b.type)+'"></i>'),b.header.innerHTML+=b.title,b.header.className="evo-popup-header",b.el.appendChild(b.header)),b.el.innerHTML+='<div class="evo-popup-body"></div>',b.wrap.appendChild(b.el),b.mt=parseFloat(getComputedStyle(b.el).marginTop),b.maxheight&&(b.maxheight=/(%)/.test(b.maxheight)?(b.w.innerHeight-b.el.offsetHeight-b.mt)/100*parseInt(b.maxheight):b.maxheight,b.el.lastChild.style.overflowY="auto",b.el.lastChild.style.maxHeight=b.maxheight+"px"),b.url)if(b.draggable=1,"iframe"===b.iframe)b.resize=1,b.uid=modx.urlToUid(a.url),b.el.className+=" "+b.addclass+" "+b.className+"-iframe",b.el.id="evo-popup-"+b.uid,d.getElementById("mainloader").className="show",b.frame=d.createElement("iframe"),b.frame.width="100%",b.frame.height="100%",b.frame.frameBorder="0",b.frame.src=b.url,b.frame.onload=function(c){c.target.contentWindow.opener=b.w,a.url=c.target.contentWindow.location.href,b.uid=modx.urlToUid(a.url),b.event=c,c.target.contentWindow.__alertQuit?(modx.popup({type:"warning",title:"MODX :: Alert",position:"top center alertQuit",content:c.target.contentWindow.document.body.querySelector("p").innerHTML}),c.target.contentWindow.document.body.innerHTML="",c.target.contentWindow.alert=function(){}):modx.getActionFromUrl(a.url,2)||b.wrap.querySelectorAll("#evo-popup-"+b.uid).length>1?b.el.close():(c.target.contentDocument.querySelectorAll("h1")[0]?a.title=c.target.contentDocument.querySelectorAll("h1")[0].innerHTML:c.target.contentDocument.title&&(a.title=c.target.contentDocument.title),b.header&&(c.target.offsetParent.offsetParent.getElementsByClassName(b.header.className)[0].innerHTML=a.title),c.target.offsetParent.offsetParent.id="evo-popup-"+b.uid,c.target.offsetParent.offsetParent.classList.remove("changed")),c.target.contentWindow.close=b.close,modx.main.stopWork()},b.el.lastChild.appendChild(b.frame),b.show();else{var e=new XMLHttpRequest;e.open(b.method,b.url,!0),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded;"),e.setRequestHeader("X-REQUESTED-WITH","XMLHttpRequest"),b.dataType&&(e.responseType=b.dataType),e.onload=function(){if(4===this.readyState){if(b.el.className+=" "+b.className+"-ajax","document"===b.dataType)if(b.selector){var a=this.response.documentElement.querySelector(b.selector);a&&(b.el.lastChild.innerHTML+=a.innerHTML)}else b.el.lastChild.innerHTML+=this.response.body.innerHTML;else b.el.lastChild.innerHTML+=this.response;b.show()}},e.send(b.data)}else b.el.lastChild.innerHTML+=b.content,b.show();return b}},getWindowDimension:function(){var a=0,b=0,c=d.documentElement,e=d.body;return"number"===typeof w.innerWidth?(a=w.innerWidth,b=w.innerHeight):c&&(c.clientWidth||c.clientHeight)?(a=c.clientWidth,b=c.clientHeight):e&&(e.clientWidth||e.clientHeight)&&(a=e.clientWidth,b=e.clientHeight),{width:a,height:b}},hideDropDown:function(a){if(a=a||w.event||w.main.event,("open"===tree.ca||""===tree.ca)&&modx.tree.setSelectedByContext(),null!==modx.tree.ctx&&(d.getElementById(modx.frameset).removeChild(modx.tree.ctx),modx.tree.ctx=null),!/dropdown\-item/.test(a.target.className)){var f,b=d.querySelectorAll(".dropdown.show"),c=null,e=a.target||a.target.parentNode;for("undefined"!==typeof e.dataset.toggle?c=d.querySelector(e.dataset.toggle):e.classList.contains("dropdown-toggle")&&(c=e.offsetParent),f=0;f<b.length;f++)c!==b[f]&&b[f].classList.remove("show");for(b=w.main&&w.main.document.querySelectorAll(".dropdown.show")||[],f=0;f<b.length;f++)c!==b[f]&&b[f].classList.remove("show")}},XHR:function(){return"XMLHttpRequest"in w?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")},get:function(a,b,c){var d=this.XHR();d.open("GET",a,!0),d.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),c&&(d.responseType=c),d.onload=function(){return 200===this.status&&"function"===typeof b?b(this.response):void 0},d.send()},post:function(a,b,c,d){var e=this.XHR(),f="";if("function"===typeof b)d=c,c=b;else if("object"===typeof b){var i,g=[],h=0;for(i in b)b.hasOwnProperty(i)&&(g[h++]=i+"="+b[i]);f=g.join("&")}else"string"===typeof b&&(f=b);e.open("POST",a,!0),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),e.setRequestHeader("X-REQUESTED-WITH","XMLHttpRequest"),d&&(e.responseType=d),e.onload=function(){return 4===this.readyState&&c!==u?c(this.response):void 0},e.send(f)},pxToRem:function(a){return a/parseInt(w.getComputedStyle(d.documentElement).fontSize)},remToPx:function(a){return a*parseInt(w.getComputedStyle(d.documentElement).fontSize)},toHash:function(a){a=String(JSON.stringify(a));var c,d,b=0;if(0===a.length)return b;for(d=0;d<a.length;d++)c=a.charCodeAt(d),b=(b<<5)-b+c,b&=b;return Math.abs(b).toString()},urlToUid:function(a){var c,b="";return a=a.split("?"),a=a[1]||a[0],a&&(c=modx.getActionFromUrl(a),c&&(b+=modx.typesactions[c]?"&type="+modx.typesactions[c]:"&a="+c),modx.main.getQueryVariable("id",a)&&(b+="&id="+modx.main.getQueryVariable("id",a)),modx.main.getQueryVariable("type",a)&&(b+="&type="+modx.main.getQueryVariable("type",a)),b=modx.toHash(b)),b},getActionFromUrl:function(a,b){return"undefined"!==typeof b?parseInt(modx.main.getQueryVariable("a",a))===parseInt(b):parseInt(modx.main.getQueryVariable("a",a))},getLockedElements:function(a,b,c){modx.typesactions[a]&&b&&modx.post(modx.MODX_MANAGER_URL+"media/style/"+modx.config.theme+"/ajax.php",{a:"getLockedElements",id:modx.main.getQueryVariable("id",w.main.location.search),type:modx.typesactions[modx.getActionFromUrl(w.main.location.search)]},c)},dragging:function(a,b){return this.dragging.init=function(a,b){var c={resize:!1,minWidth:50,minHeight:50,wrap:document,opacity:"0.65",classDrag:"drag",classResize:"resize",handler:"",onstart:function(){},onstop:function(){},ondrag:function(){},onresize:function(){}},d={x:0,y:0,elmX:0,elmY:0,border:5,isdrag:!1,isresize:!1,onTop:0,onLeft:0,onRight:0,onBottom:0,handlerHeight:a.offsetHeight,borders:document.createElement("div")},e=modx.extend(this,c,b,d);this.el=a,this.borders.className="border-outline",this.borders.innerHTML='<i class="bo-left"></i><i class="bo-top"></i><i class="bo-right"></i><i class="bo-bottom"></i>',this.classDrag&&this.el.classList.add(this.classDrag),this.classResize&&this.el.classList.add(this.classResize),this.el.insertBefore(this.borders,this.el.firstChild),this.handler&&this.el.getElementsByClassName(this.handler)[0]&&(this.handler=this.el.getElementsByClassName(this.handler)[0],this.handlerHeight=this.handler.offsetHeight),this.el.onmousedown=function(a){e.mousedown(a)},this.el.ontouchstart=function(a){e.mousedown(a.changedTouches[0])},this.wrap.addEventListener("mousemove",function(a){e.calc(a)},!1),this.wrap.addEventListener("touchmove",function(a){e.calc(a.changedTouches[0])},!1)},this.dragging.init.prototype={mousedown:function(a){if(!a.target.classList.contains("close")){a=document.all?window.event:a;var b=this,c=document.all?window.event.clientX:a.clientX,d=document.all?window.event.clientY:a.clientY,e=w.getComputedStyle(this.el);this.elmX=c-this.el.offsetLeft+parseInt(e.marginLeft),this.elmY=d-this.el.offsetTop+parseInt(e.marginTop),this.el.position=this.el.getBoundingClientRect(),this.el.style.position="fixed",this.el.style.transitionDuration="0s",this.el.style.webkitTransitionDuration="0s",this.el.style.left=this.el.offsetLeft-parseInt(e.marginLeft)+"px",this.el.style.top=this.el.offsetTop-parseInt(e.marginTop)+"px",this.el.style.right="auto",this.el.style.bottom="auto",this.el.style.width=this.el.position.width+"px",this.el.style.height=this.el.position.height+"px",a.target.parentNode===this.borders?(this.isresize=this.resize,this.el.classList.add("is-resize")):(!this.handler||this.handler&&a.target===this.handler)&&(this.isdrag=!0,this.el.classList.add("is-drag")),"function"===typeof this.start&&this.onstart(a,this.el),a.preventDefault?a.preventDefault():document.onselectstart=function(){return!1},this.wrap.onmousemove=function(a){b.mousemove(a)},this.wrap.ontouchmove=function(a){b.mousemove(a.changedTouches[0]),a.stopPropagation()},this.wrap.onmouseup=function(a){b.mouseup(a)},this.wrap.ontouchend=function(a){b.mouseup(a.changedTouches[0]),a.stopPropagation()}}},mousemove:function(a){var b=document.all?window.event.clientX:a.clientX,c=document.all?window.event.clientY:a.clientY;if(this.isresize){if(this.onRight&&(this.el.style.width=Math.max(b-this.el.position.left+(this.el.position.width-this.x),this.minWidth)+"px"),this.onBottom&&(this.el.style.height=Math.max(c-this.el.position.top+(this.el.position.height-this.y),this.minHeight)+"px"),this.onLeft&&(this.width=Math.max(this.el.position.left-b+this.el.position.width+this.x,this.minWidth),this.width>this.minWidth&&(this.el.style.width=this.width+"px",this.el.style.left=b-this.elmX+"px")),this.onTop){var d=Math.max(this.el.position.top-c+this.el.position.height+this.y,this.minHeight);d>this.minHeight&&(this.el.style.height=d+"px",this.el.style.top=c-this.elmY+"px")}"function"===typeof this.onresize&&this.onresize(a,this.el)}else this.isdrag&&(this.el.style.opacity=this.opacity,this.el.style.left=b-this.elmX+"px",this.el.style.top=c-this.elmY+"px","function"===typeof this.drag&&this.ondrag(a,this.el))},mouseup:function(a){(this.isdrag||this.isresize)&&(this.el.classList.remove("is-resize"),this.el.classList.remove("is-drag"),this.el.style.opacity="",this.el.style.transitionDuration="",this.el.style.webkitTransitionDuration="",this.el.position=this.el.getBoundingClientRect(),this.isdrag=!1,this.isresize=!1,this.wrap.onmousemove=null,this.wrap.onselectstart=null,"function"===typeof this.stop&&this.onstop(a,this.el))},calc:function(a){this.isresize||this.isdrag||(this.x=a.clientX-this.el.offsetLeft,this.y=a.clientY-this.el.offsetTop,this.resize?(this.onTop=this.y<this.border,this.onLeft=this.x<this.border,this.onRight=this.x>=this.el.offsetWidth-this.border,this.onBottom=this.y>=this.el.offsetHeight-this.border,this.el.style.cursor=this.onRight&&this.onBottom||this.onLeft&&this.onTop?"nwse-resize":this.onRight&&this.onTop||this.onBottom&&this.onLeft?"nesw-resize":this.onRight||this.onLeft?"ew-resize":this.onBottom||this.onTop?"ns-resize":this.x>0&&this.y>0&&this.x<this.el.offsetWidth&&this.y<=this.handlerHeight&&this.y>=this.border?"move":"default"):this.x>0&&this.y>0&&this.x<this.el.offsetWidth&&this.y<=this.handlerHeight&&this.y>=this.border&&(this.el.style.cursor="move"))}},new this.dragging.init(a,b)},setTypeIcon:function(a){var b="";switch(this.typesactions[a]){case 1:b="fa fa-newspaper-o";break;case 2:b="fa fa-list-alt";break;case 3:b="fa fa-th-large";break;case 4:b="fa fa-code";break;case 5:b="fa fa-plug";break;case 6:b="fa fa-cube";break;case 7:b="fa fa-pencil-square-o";break;default:b="fa fa-circle"}return b}}),w.mainMenu={},w.mainMenu.stopWork=function(){modx.main.stopWork()},w.mainMenu.work=function(){modx.main.work()},w.mainMenu.reloadtree=function(){modx.plugins.ElementsInTree&&setTimeout("reloadElementsInTree()",50),modx.config.global_tabs&&setTimeout("modx.tree.restoreTree()",100)},w.mainMenu.startrefresh=function(a){9===a&&modx.tree.restoreTree(),10===a&&(w.location.href=modx.MODX_MANAGER_URL)},w.mainMenu.startmsgcount=function(a,b,c){modx.updateMail(c)},w.mainMenu.hideTreeFrame=function(){modx.resizer.setWidth(0)},w.mainMenu.defaultTreeFrame=function(){modx.resizer.setDefaultWidth()},w.tree={},w.tree.ca="open",w.tree.document=document,w.tree.saveFolderState=function(){},w.tree.updateTree=function(){modx.tree.updateTree()},w.tree.restoreTree=function(){modx.tree.restoreTree()},w.tree.resizeTree=function(){},w.onbeforeunload=function(){var a=w.main.frameElement.contentWindow;modx.getActionFromUrl(a.location.search,27)&&modx.get(modx.MODX_MANAGER_URL+"?a=67&type=7&id="+modx.main.getQueryVariable("id",a.location.search.substring(1)))},d.addEventListener("DOMContentLoaded",function(){modx.init()})}("undefined"!==typeof jQuery?jQuery:"",window,document,void 0),function(){Element.prototype.closest||(Element.prototype.closest=function(a){var c,d,b=this;if(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].some(function(a){return"function"===typeof document.body[a]?(c=a,!0):!1}),b&&c&&b[c](a))return b;for(;b;){if(d=b.parentElement,d&&c&&d[c](a))return d;b=d}return null})}();